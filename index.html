<button id="pay">Test Payment (0.01 Pi)</button>

<script>
document.getElementById("pay").onclick = async () => {
  const payment = await Pi.createPayment({
    amount: 0.01,
    memo: "Test payment Profile Pi Card",
    metadata: { test: true },
    onReadyForServerApproval: async (paymentId) => {
      await fetch("/api/pi", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ paymentId, action: "approve" })
      });
    },
    onReadyForServerCompletion: async (paymentId) => {
      await fetch("/api/pi", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ paymentId, action: "complete" })
      });
      alert("Payment completed successfully");
    },
    onCancel: () => alert("Payment cancelled"),
    onError: (err) => console.error(err),
  });
};
</script>
